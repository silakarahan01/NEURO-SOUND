{% extends 'base.html' %}

{% block content %}
<div class="max-w-md mx-auto">
    <!-- Başlık ve İkon -->
    <div class="text-center mb-8">
        <div class="inline-flex items-center justify-center w-20 h-20 bg-violet-600/20 rounded-full mb-4 ring-1 ring-violet-500/40 shadow-[0_0_15px_rgba(139,92,246,0.3)] animate-pulse">
            <i class="fas fa-lock-open text-3xl text-violet-300"></i>
        </div>
        <h2 class="text-3xl font-bold text-white mb-2">Yeni Şifre Belirle</h2>
        <p class="text-stone-400 text-sm">Lütfen hesabınız için güçlü ve güvenli bir şifre seçin.</p>
    </div>

    <!-- Form Kartı -->
    <div class="bg-stone-800/60 backdrop-blur-md border border-white/10 p-8 rounded-3xl shadow-2xl relative overflow-hidden">
        
        <!-- Eğer link geçersizse Django hata mesajı gösterebilir, formun geçerli olup olmadığını kontrol edelim -->
        {% if validlink %}
            <form method="post" class="space-y-6">
                {% csrf_token %}
                
                <!-- Django Formunu Tailwind ile Otomatik Stilleme -->
                <!-- Bu CSS bloğu, Django'nun ürettiği varsayılan form elemanlarını (p, label, input, helptext) hedef alarak stilize eder -->
                <div class="space-y-4 
                    [&>p>label]:block [&>p>label]:text-stone-300 [&>p>label]:text-xs [&>p>label]:font-bold [&>p>label]:uppercase [&>p>label]:tracking-wider [&>p>label]:mb-2 
                    [&>p>input]:w-full [&>p>input]:px-4 [&>p>input]:py-3 [&>p>input]:bg-stone-900/50 [&>p>input]:border [&>p>input]:border-stone-700 [&>p>input]:rounded-xl [&>p>input]:text-white [&>p>input]:placeholder-stone-600 [&>p>input]:focus:outline-none [&>p>input]:focus:border-violet-500 [&>p>input]:focus:ring-1 [&>p>input]:focus:ring-violet-500 [&>p>input]:transition [&>p>input]:duration-300 
                    [&>ul]:text-red-400 [&>ul]:text-sm [&>ul]:mt-1 [&>ul]:list-disc [&>ul]:pl-5 
                    [&>span]:text-stone-500 [&>span]:text-xs [&>span]:mt-1 [&>span]:block">
                    {{ form.as_p }}
                </div>

                <button type="submit" class="w-full bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white font-bold py-3.5 rounded-xl shadow-lg shadow-violet-500/30 transition transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2">
                    <i class="fas fa-save"></i> Şifreyi Değiştir
                </button>
            </form>
        {% else %}
            <!-- Link Geçersizse -->
            <div class="text-center">
                <div class="bg-red-500/10 border border-red-500/30 text-red-400 px-4 py-3 rounded-xl text-sm mb-6 flex items-center justify-center gap-2">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Şifre sıfırlama bağlantısı geçersiz veya süresi dolmuş.</span>
                </div>
                <a href="{% url 'password_reset' %}" class="text-violet-400 hover:text-violet-300 transition font-medium underline">
                    Yeni bir şifre sıfırlama isteği gönderin
                </a>
            </div>
        {% endif %}

    </div>
</div>
{% endblock %}